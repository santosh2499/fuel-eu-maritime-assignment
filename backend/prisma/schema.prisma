// prisma/schema.prisma

// ====================
// Datasource
// ====================
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ====================
// Generator
// ====================
generator client {
  provider = "prisma-client-js"
}

// ====================
// Existing Models
// ====================

model Company {
  id        String    @id @default(cuid())
  name      String
  ships     Ship[]
  createdAt DateTime  @default(now())
}

model Ship {
  id        String           @id @default(cuid())
  name      String
  company   Company?         @relation(fields: [companyId], references: [id])
  companyId String?
  pools     PoolMember[]
  createdAt DateTime         @default(now())
}

// Example Pool & PoolMember models (if already exist)
model Pool {
  id         String       @id @default(cuid())
  year       Int
  createdAt  DateTime     @default(now())
  members    PoolMember[]
}

model PoolMember {
  id        String    @id @default(cuid())
  pool      Pool?     @relation(fields: [poolId], references: [id])
  poolId    String?
  ship      Ship?     @relation(fields: [shipId], references: [id])
  shipId    String?
  cbBefore  Float
  cbAfter   Float
}

// ====================
// New Models for FuelEU
// ====================

model Route {
  id               String   @id @default(cuid())
  routeId          String   @unique
  vesselType       String
  fuelType         String
  year             Int
  ghgIntensity     Float    // gCO2e/MJ
  fuelConsumption  Float    // t
  distanceKm       Float
  totalEmissions   Float
  isBaseline       Boolean  @default(false)
}

model ShipCompliance {
  id         String   @id @default(cuid())
  shipId     String
  year       Int
  cb_gco2eq  Float
  createdAt  DateTime @default(now())
}

model BankEntry {
  id            String   @id @default(cuid())
  shipId        String
  year          Int
  amount_gco2eq Float
  type          String   // "BANK" or "APPLY"
  createdAt     DateTime @default(now())
}
